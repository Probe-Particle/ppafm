import numpy as np
from matplotlib.colors import ListedColormap
import matplotlib.colors as mcolors
#import matplotlib.pyplot as plt
import matplotlib.cm as cm
import matplotlib as mpl

colors_vanimo = np.array(
          [[1, 0.80346, 0.99215],      
           [0.99397, 0.79197, 0.98374],      
           [0.98791, 0.78052, 0.97535],      
           [0.98185, 0.7691, 0.96699],      
           [0.97578, 0.75774, 0.95867],      
           [0.96971, 0.74643, 0.95037],      
           [0.96363, 0.73517, 0.94211],      
           [0.95755, 0.72397, 0.93389],      
           [0.95147, 0.71284, 0.9257],      
           [0.94539, 0.70177, 0.91756],      
           [0.93931, 0.69077, 0.90945],      
           [0.93322, 0.67984, 0.90137],      
           [0.92713, 0.66899, 0.89334],      
           [0.92104, 0.65821, 0.88534],      
           [0.91495, 0.64751, 0.87738],      
           [0.90886, 0.63689, 0.86946],      
           [0.90276, 0.62634, 0.86158],      
           [0.89666, 0.61588, 0.85372],      
           [0.89055, 0.60551, 0.84591],      
           [0.88444, 0.59522, 0.83813],      
           [0.87831, 0.58503, 0.83039],      
           [0.87219, 0.57491, 0.82268],      
           [0.86605, 0.5649, 0.815],      
           [0.8599, 0.55499, 0.80736],      
           [0.85373, 0.54517, 0.79974],      
           [0.84756, 0.53544, 0.79216],      
           [0.84138, 0.52583, 0.78461],      
           [0.83517, 0.5163, 0.77709],      
           [0.82896, 0.5069, 0.76959],      
           [0.82272, 0.49761, 0.76212],      
           [0.81647, 0.48841, 0.75469],      
           [0.81018, 0.47934, 0.74728],      
           [0.80389, 0.47038, 0.7399],      
           [0.79757, 0.46154, 0.73255],      
           [0.79123, 0.45283, 0.72522],      
           [0.78487, 0.44424, 0.71792],      
           [0.77847, 0.43578, 0.71064],      
           [0.77206, 0.42745, 0.70339],      
           [0.76562, 0.41925, 0.69617],      
           [0.75914, 0.41118, 0.68897],      
           [0.75264, 0.40327, 0.68179],      
           [0.74612, 0.39549, 0.67465],      
           [0.73957, 0.38783, 0.66752],      
           [0.73297, 0.38034, 0.66041],      
           [0.72634, 0.37297, 0.65331],      
           [0.71967, 0.36575, 0.64623],      
           [0.71293, 0.35864, 0.63915],      
           [0.70615, 0.35166, 0.63206],      
           [0.69929, 0.34481, 0.62496],      
           [0.69236, 0.33804, 0.61782],      
           [0.68532, 0.33137, 0.61064],      
           [0.67817, 0.32479, 0.6034],      
           [0.67091, 0.3183, 0.59609],      
           [0.66351, 0.31184, 0.5887],      
           [0.65598, 0.30549, 0.58123],      
           [0.64828, 0.29917, 0.57366],      
           [0.64045, 0.29289, 0.56599],      
           [0.63245, 0.28667, 0.55822],      
           [0.6243, 0.28051, 0.55035],      
           [0.61598, 0.27442, 0.54237],      
           [0.60752, 0.26838, 0.53428],      
           [0.59889, 0.2624, 0.5261],      
           [0.59012, 0.25648, 0.51782],      
           [0.5812, 0.25063, 0.50944],      
           [0.57214, 0.24483, 0.50097],      
           [0.56294, 0.23914, 0.4924],      
           [0.55359, 0.23348, 0.48376],      
           [0.54413, 0.22795, 0.47505],      
           [0.53454, 0.22245, 0.46623],      
           [0.52483, 0.21706, 0.45736],      
           [0.51501, 0.21174, 0.44843],      
           [0.50508, 0.20651, 0.43942],      
           [0.49507, 0.20131, 0.43036],      
           [0.48495, 0.19628, 0.42125],      
           [0.47476, 0.19128, 0.4121],      
           [0.4645, 0.18639, 0.4029],      
           [0.45415, 0.18157, 0.39367],      
           [0.44376, 0.17688, 0.38441],      
           [0.43331, 0.17225, 0.37513],      
           [0.42282, 0.16773, 0.36585],      
           [0.41232, 0.16332, 0.35655],      
           [0.40178, 0.15897, 0.34726],      
           [0.39125, 0.15471, 0.33796],      
           [0.38071, 0.15058, 0.32869],      
           [0.37017, 0.14651, 0.31945],      
           [0.35969, 0.14258, 0.31025],      
           [0.34923, 0.13872, 0.30106],      
           [0.33883, 0.13499, 0.29196],      
           [0.32849, 0.13133, 0.28293],      
           [0.31824, 0.12778, 0.27396],      
           [0.30808, 0.12431, 0.26508],      
           [0.29805, 0.12097, 0.25631],      
           [0.28815, 0.11778, 0.24768],      
           [0.27841, 0.11462, 0.23916],      
           [0.26885, 0.11169, 0.23079],      
           [0.25946, 0.10877, 0.22259],      
           [0.25025, 0.10605, 0.21455],      
           [0.24131, 0.10341, 0.20673],      
           [0.23258, 0.10086, 0.19905],      
           [0.2241, 0.098494, 0.19163],      
           [0.21593, 0.096182, 0.18443],      
           [0.20799, 0.094098, 0.17748],      
           [0.20032, 0.092102, 0.17072],      
           [0.19299, 0.09021, 0.16425],      
           [0.18596, 0.088461, 0.15799],      
           [0.17918, 0.086861, 0.15197],      
           [0.17272, 0.08531, 0.14623],      
           [0.16658, 0.084017, 0.14075],      
           [0.1607, 0.082745, 0.13546],      
           [0.15515, 0.081683, 0.13049],      
           [0.1499, 0.080653, 0.1257],      
           [0.14493, 0.07978, 0.12112],      
           [0.1402, 0.079037, 0.11685],      
           [0.13578, 0.078426, 0.11282],      
           [0.13168, 0.077944, 0.10894],      
           [0.12782, 0.077586, 0.10529],      
           [0.12422, 0.077332, 0.1019],      
           [0.12091, 0.077161, 0.098724],      
           [0.11793, 0.077088, 0.095739],      
           [0.11512, 0.077124, 0.092921],      
           [0.11267, 0.077278, 0.090344],      
           [0.11042, 0.077557, 0.087858],      
           [0.10835, 0.077968, 0.085431],      
           [0.10665, 0.078516, 0.083233],      
           [0.105, 0.079207, 0.081185],      
           [0.10368, 0.080048, 0.079202],      
           [0.10245, 0.081036, 0.077408],      
           [0.10143, 0.082173, 0.075793],      
           [0.1006, 0.083343, 0.074344],      
           [0.099957, 0.084733, 0.073021],      
           [0.099492, 0.086174, 0.071799],      
           [0.099204, 0.087868, 0.070716],      
           [0.099092, 0.089631, 0.069813],      
           [0.099154, 0.091582, 0.069047],      
           [0.099384, 0.093597, 0.068337],      
           [0.099759, 0.095871, 0.067776],      
           [0.10029, 0.098368, 0.067351],      
           [0.10099, 0.101, 0.067056],      
           [0.10185, 0.1039, 0.066891],      
           [0.1029, 0.10702, 0.066853],      
           [0.10407, 0.11031, 0.066942],      
           [0.10543, 0.1138, 0.067155],      
           [0.10701, 0.1175, 0.067485],      
           [0.10866, 0.12142, 0.067929],      
           [0.11059, 0.12561, 0.06849],      
           [0.11265, 0.12998, 0.069162],      
           [0.11483, 0.13453, 0.069842],      
           [0.11725, 0.13923, 0.07061],      
           [0.11985, 0.14422, 0.071528],      
           [0.12259, 0.14937, 0.072403],      
           [0.12558, 0.15467, 0.073463],      
           [0.12867, 0.16015, 0.074429],      
           [0.13196, 0.16584, 0.075451],      
           [0.1354, 0.17169, 0.076499],      
           [0.13898, 0.17771, 0.077615],      
           [0.14273, 0.18382, 0.078814],      
           [0.14658, 0.1901, 0.080098],      
           [0.15058, 0.19654, 0.081473],      
           [0.15468, 0.20304, 0.08282],      
           [0.15891, 0.20968, 0.084315],      
           [0.16324, 0.21644, 0.085726],      
           [0.16764, 0.22326, 0.087378],      
           [0.17214, 0.23015, 0.088955],      
           [0.17673, 0.23717, 0.090617],      
           [0.18139, 0.24418, 0.092314],      
           [0.18615, 0.25132, 0.094071],      
           [0.19092, 0.25846, 0.095839],      
           [0.19578, 0.26567, 0.097702],      
           [0.20067, 0.2729, 0.099539],      
           [0.20564, 0.28016, 0.10144],      
           [0.21062, 0.28744, 0.10342],      
           [0.21565, 0.29475, 0.10534],      
           [0.22072, 0.30207, 0.10737],      
           [0.22579, 0.30942, 0.10942],      
           [0.23087, 0.31675, 0.11146],      
           [0.236, 0.32407, 0.11354],      
           [0.24112, 0.3314, 0.11563],      
           [0.24625, 0.33874, 0.11774],      
           [0.25142, 0.34605, 0.11988],      
           [0.25656, 0.35337, 0.12202],      
           [0.26171, 0.36065, 0.12422],      
           [0.26686, 0.36793, 0.12645],      
           [0.272, 0.37519, 0.12865],      
           [0.27717, 0.38242, 0.13092],      
           [0.28231, 0.38964, 0.13316],      
           [0.28741, 0.39682, 0.13541],      
           [0.29253, 0.40398, 0.13773],      
           [0.29763, 0.41111, 0.13998],      
           [0.30271, 0.4182, 0.14232],      
           [0.30778, 0.42527, 0.14466],      
           [0.31283, 0.43231, 0.14699],      
           [0.31787, 0.43929, 0.14937],      
           [0.32289, 0.44625, 0.15173],      
           [0.32787, 0.45318, 0.15414],      
           [0.33286, 0.46006, 0.1566],      
           [0.33781, 0.46693, 0.15904],      
           [0.34276, 0.47374, 0.16155],      
           [0.34769, 0.48054, 0.16407],      
           [0.3526, 0.48733, 0.16661],      
           [0.35753, 0.4941, 0.16923],      
           [0.36245, 0.50086, 0.17185],      
           [0.36738, 0.50764, 0.17458],      
           [0.37234, 0.51443, 0.17738],      
           [0.37735, 0.52125, 0.18022],      
           [0.38238, 0.52812, 0.18318],      
           [0.38746, 0.53505, 0.18626],      
           [0.39261, 0.54204, 0.18942],      
           [0.39783, 0.54911, 0.19272],      
           [0.40311, 0.55624, 0.19616],      
           [0.40846, 0.56348, 0.1997],      
           [0.4139, 0.57078, 0.20345],      
           [0.41942, 0.57819, 0.20734],      
           [0.42503, 0.5857, 0.2114],      
           [0.43071, 0.59329, 0.21565],      
           [0.43649, 0.60098, 0.22009],      
           [0.44237, 0.60878, 0.2247],      
           [0.44833, 0.61667, 0.22956],      
           [0.45439, 0.62465, 0.23468],      
           [0.46053, 0.63274, 0.23997],      
           [0.46679, 0.64092, 0.24553],      
           [0.47313, 0.64921, 0.25138],      
           [0.47959, 0.6576, 0.25745],      
           [0.48612, 0.66608, 0.26382],      
           [0.49277, 0.67466, 0.27047],      
           [0.49951, 0.68335, 0.2774],      
           [0.50636, 0.69213, 0.28464],      
           [0.51331, 0.70101, 0.2922],      
           [0.52035, 0.70998, 0.30008],      
           [0.5275, 0.71905, 0.30828],      
           [0.53474, 0.72821, 0.31682],      
           [0.54207, 0.73747, 0.32567],      
           [0.5495, 0.74682, 0.33491],      
           [0.55702, 0.75625, 0.34443],      
           [0.56461, 0.76577, 0.35434],      
           [0.5723, 0.77537, 0.36457],      
           [0.58006, 0.78506, 0.37515],      
           [0.58789, 0.79482, 0.38607],      
           [0.59581, 0.80465, 0.39734],      
           [0.60379, 0.81455, 0.40894],      
           [0.61182, 0.82453, 0.42086],      
           [0.61991, 0.83457, 0.43311],      
           [0.62805, 0.84467, 0.44566],      
           [0.63623, 0.85482, 0.45852],      
           [0.64445, 0.86503, 0.47168],      
           [0.6527, 0.8753, 0.48511],      
           [0.66099, 0.88562, 0.49882],      
           [0.6693, 0.89599, 0.51278],      
           [0.67763, 0.90641, 0.52699],      
           [0.68597, 0.91687, 0.54141],      
           [0.69432, 0.92738, 0.55605],      
           [0.70269, 0.93794, 0.5709],      
           [0.71107, 0.94855, 0.58593],      
           [0.71945, 0.9592, 0.60112],      
           [0.72782, 0.96989, 0.61646],      
           [0.7362, 0.98063, 0.63191],      
           [0.74458, 0.99141, 0.64748]])   

# -------- vanimo and vanimo_inv
vanimo_cmap = ListedColormap( colors_vanimo, name='vanimo')
cm.register_cmap(name='vanimo', cmap=vanimo_cmap)
vanimo_cmap_inv = ListedColormap( colors_vanimo[::-1], name='vanimo_r')
cm.register_cmap(name='vanimo_r', cmap=vanimo_cmap_inv)

# -------- Invert PiYG
# original_cmap = mpl.cm.get_cmap('PiYG')
# colors = original_cmap(np.linspace(0, 1, 256))
# inverted_colors = colors[::-1]
# PiYG_inv = mpl.colors.LinearSegmentedColormap.from_list('PiYG_inv', inverted_colors)
# mpl.colormaps.register(PiYG_inv)


def create_diverging_map(cmap_name1, cmap_name2, n_colors_per_half=128, name_suffix="_div"):
    """
    Creates a diverging colormap from two sequential colormaps.
    Assumes cmap_name1 goes Color1 -> White (or light center)
    Assumes cmap_name2 goes White (or light center) -> Color2
    """
    cmap1 = cm.get_cmap(cmap_name1)
    cmap2 = cm.get_cmap(cmap_name2)

    # Get colors from each colormap half
    # For cmap1 (e.g., BuGn_r: Green->White), we take the whole map
    colors1 = cmap1(np.linspace(0, 1, n_colors_per_half))
    # For cmap2 (e.g., PuRd: White->Purple), we take the whole map
    colors2 = cmap2(np.linspace(0, 1, n_colors_per_half))

    # Combine the color arrays.
    # If cmap1 ends at white and cmap2 starts at white, we can remove one white entry.
    # This ensures a single central white point.
    combined_colors = np.vstack((colors1[:-1], colors2[:])) # colors2[0] is skipped
    
    # Sanitize cmap names for the new name (remove _r, _r_div etc.)
    name1_clean = cmap_name1.replace('_r', 'R')
    name2_clean = cmap_name2.replace('_r', 'R')
    new_cmap_name = f"{name1_clean}-w-{name2_clean}{name_suffix}"
    
    new_cmap = mcolors.ListedColormap(combined_colors, name=new_cmap_name)
    cm.register_cmap(name=new_cmap_name, cmap=new_cmap)
    print(f"Registered colormap: {new_cmap_name}")
    return new_cmap

# Create and register your Purple-White-Green colormap: PuRd_r (Purple->White) and BuGn (White->Green)
PurpleWhiteGreen = create_diverging_map('PuRd_r', 'BuGn', name_suffix="")

# Create and register your Green-White-Purple colormap: BuGn_r (Green->White) and PuRd (White->Purple)
GreenWhitePurple = create_diverging_map('BuGn_r', 'PuRd', name_suffix="")